<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Posts Feed</title>
    <!-- Use Inter font for a modern look and feel -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <script src="./3.4.17.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f3f4f6;
            margin: 0;
            /* Flexbox layout to correctly position the navbar and posts */
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Hide the main scrollbar */
        }
        
        /* Custom styles to hide the scrollbar for all major browsers */
        .posts-container::-webkit-scrollbar {
            display: none; /* Hide scrollbar for Chrome, Safari and Opera */
        }
        .posts-container {
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }

        .posts-container {
            /* Enable vertical scrolling and scroll snapping */
            overflow-y: scroll;
            -webkit-overflow-scrolling: touch; /* Smoother scrolling on iOS */
            scroll-snap-type: y mandatory; /* The magic for snapping to posts */
            scroll-behavior: smooth; /* Smooth scroll between snaps */
            flex: 1; /* Take up all available space */
        }

        .post-wrapper {
            width: 100%;
            height: 100%; /* Ensure each post fills the container height */
            position: relative;
            scroll-snap-align: start; /* Snap each post to the top of the container */
            flex-shrink: 0; /* Prevent posts from shrinking */
        }

        .post-image {
            object-fit: cover;
            width: 100%;
            height: 100%;
        }

        .post-overlay {
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, transparent 100%);
        }

        .profile-pic {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white; /* Add a white border to the profile pic */
        }

        .swipe-indicator {
            position: fixed; /* Use fixed positioning to keep it in place */
            right: 1.5rem;
            top: 50%;
            transform: translateY(-50%);
            z-index: 50;
            display: flex;
            flex-direction: column;
            gap: 8px; /* Spacing between dots */
        }

        .swipe-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5); /* Semi-transparent white */
            transition: all 0.3s ease;
        }

        .swipe-dot.active {
            background: #fff;
            transform: scale(1.2);
            box-shadow: 0 0 8px rgba(255,255,255,0.8);
        }
        
        /* Interactive element styling */
        .like-btn, .comment-btn, .share-btn {
            color: white;
            transition: transform 0.2s ease, color 0.2s ease;
        }
        
        .like-btn:hover, .comment-btn:hover, .share-btn:hover {
            transform: scale(1.1);
        }
        
        .like-btn.liked {
            color: #ef4444; /* Red color for liked posts */
            transform: scale(1.2);
        }

        /* Styling for the captions */
        .read-more-btn {
            color: #d1d5db; /* Light gray for the button text */
            text-decoration: none;
            font-weight: 500;
        }

        .read-more-btn:hover {
            color: #e5e7eb;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-center w-full z-50 flex-shrink-0">
        <h1 class="text-xl font-semibold text-gray-800">Posts</h1>
    </nav>

    <!-- Posts Container -->
    <div class="posts-container" id="postsContainer">
        <!-- Post 1 -->
        <div class="post-wrapper bg-gray-100 relative">
            <img 
                class="post-image w-full h-full" 
                src="./slide1.jpeg"
                alt="Mountain landscape"
                onerror="this.src='./slide1.jpeg'">
            <div class="post-overlay absolute inset-0"></div>
            
            <!-- Post Content -->
            <div class="absolute bottom-0 left-0 right-0 p-4 text-white">
                <!-- User Info -->
                <div class="flex items-center mb-3">
                    <img src="./dp.webp" 
                        alt="User" class="profile-pic mr-3" onerror="this.src='./dp.webp'">
                    <div>
                        <p class="font-semibold text-sm">alex_explorer</p>
                        <p class="text-xs opacity-75">2 hours ago</p>
                    </div>
                </div>
                
                <!-- Caption -->
                <div class="mb-3">
                    <p class="text-sm leading-relaxed">
                        <span class="caption-preview">Lost in the beauty of nature üèîÔ∏è There's something magical about standing on top of a mountain...</span>
                        <span class="caption-full hidden">Lost in the beauty of nature üèîÔ∏è There's something magical about standing on top of a mountain and looking down at the world below. Every step of the climb was worth this breathtaking view. The crisp mountain air, the silence broken only by the wind, and the feeling of being so small yet so connected to something greater. This is why I chase these moments. Adventure isn't just about the destination, it's about the journey and the memories we create along the way. #mountains #adventure #nature #hiking #explore</span>
                        <button class="read-more-btn ml-1 font-medium">read more</button>
                    </p>
                </div>
                
                <!-- Actions -->
                <div class="flex items-center space-x-4">
                    <button class="like-btn flex items-center space-x-1" data-post="1">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        <span class="like-count text-sm">245</span>
                    </button>
                    <button class="comment-btn flex items-center space-x-1">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                        </svg>
                        <span class="text-sm">23</span>
                    </button>
                    <button class="share-btn">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Post 2 -->
        <div class="post-wrapper bg-gray-100 relative">
            <img 
                class="post-image w-full h-full" 
                src="./slide2.jpg"
                alt="Food photography"
                onerror="this.src='./slide2.jpg'">
            <div class="post-overlay absolute inset-0"></div>
            
            <div class="absolute bottom-0 left-0 right-0 p-4 text-white">
                <div class="flex items-center mb-3">
                    <img src="./dp.webp" 
                        alt="User" class="profile-pic mr-3" onerror="this.src='./dp.webp'">
                    <div>
                        <p class="font-semibold text-sm">foodie_sarah</p>
                        <p class="text-xs opacity-75">4 hours ago</p>
                    </div>
                </div>
                
                <div class="mb-3">
                    <p class="text-sm leading-relaxed">
                        <span class="caption-preview">Sunday brunch vibes ‚ú® Nothing beats a perfectly crafted meal with friends...</span>
                        <span class="caption-full hidden">Sunday brunch vibes ‚ú® Nothing beats a perfectly crafted meal with friends. This avocado toast with poached eggs and a drizzle of truffle oil has officially ruined all other brunches for me. The cafe's attention to detail is incredible - from the artisanal bread to the perfectly runny yolk. Plus, the company makes everything taste better! Already planning our next foodie adventure. Who else thinks food tastes better when it's pretty? #brunch #foodie #avocadotoast #sundayvibes #friends</span>
                        <button class="read-more-btn ml-1 font-medium">read more</button>
                    </p>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button class="like-btn flex items-center space-x-1" data-post="2">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        <span class="like-count text-sm">189</span>
                    </button>
                    <button class="comment-btn flex items-center space-x-1">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                        </svg>
                        <span class="text-sm">17</span>
                    </button>
                    <button class="share-btn">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Post 3 -->
        <div class="post-wrapper bg-gray-100 relative">
            <img 
                class="post-image w-full h-full" 
                src="./slide3.jpeg"
                alt="Nature landscape"
                onerror="this.src='./slide3.jpeg'">
            <div class="post-overlay absolute inset-0"></div>
            
            <div class="absolute bottom-0 left-0 right-0 p-4 text-white">
                <div class="flex items-center mb-3">
                    <img src="./dp.webp" 
                        alt="User" class="profile-pic mr-3" onerror="this.src='./dp.webp'">
                    <div>
                        <p class="font-semibold text-sm">nature_mike</p>
                        <p class="text-xs opacity-75">6 hours ago</p>
                    </div>
                </div>
                
                <div class="mb-3">
                    <p class="text-sm leading-relaxed">
                        <span class="caption-preview">Golden hour magic üåÖ Caught this incredible sunset at the lake yesterday...</span>
                        <span class="caption-full hidden">Golden hour magic üåÖ Caught this incredible sunset at the lake yesterday and had to share. Sometimes you just need to put the phone down and soak in these moments, but this one was too beautiful not to capture. The way the light reflected off the water and painted the entire sky in these warm hues... nature really is the best artist. Feeling grateful for these peaceful moments and reminder to slow down. Hope this brings some calm to your scroll today. #sunset #goldenhour #lake #nature #peaceful #gratitude #reflection</span>
                        <button class="read-more-btn ml-1 font-medium">read more</button>
                    </p>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button class="like-btn flex items-center space-x-1" data-post="3">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        <span class="like-count text-sm">312</span>
                    </button>
                    <button class="comment-btn flex items-center space-x-1">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                        </svg>
                        <span class="text-sm">45</span>
                    </button>
                    <button class="share-btn">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Post 4 -->
        <div class="post-wrapper bg-gray-100 relative">
            <img 
                class="post-image w-full h-full" 
                src="./slide4.jpg"
                alt="City at night"
                onerror="this.src='./slide4.jpg'">
            <div class="post-overlay absolute inset-0"></div>
            
            <div class="absolute bottom-0 left-0 right-0 p-4 text-white">
                <div class="flex items-center mb-3">
                    <img src="./dp.webp" 
                        alt="User" class="profile-pic mr-3" onerror="this.src='./dp.webp'">
                    <div>
                        <p class="font-semibold text-sm">city_explorer</p>
                        <p class="text-xs opacity-75">8 hours ago</p>
                    </div>
                </div>
                
                <div class="mb-3">
                    <p class="text-sm leading-relaxed">
                        <span class="caption-preview">City lights and late night thoughts üåÉ There's something about the urban energy...</span>
                        <span class="caption-full hidden">City lights and late night thoughts üåÉ There's something about the urban energy that just hits different after midnight. Walking through these empty streets, watching the city sleep while a few windows still glow with life. Each light tells a story - someone working late, someone can't sleep, someone just getting home. The city never truly sleeps, it just takes a breather. Love these quiet moments between the chaos, when you can actually hear your own thoughts over the usual hustle. #citylife #nightwalk #urbanthoughts #lights #solitude #streetphotography</span>
                        <button class="read-more-btn ml-1 font-medium">read more</button>
                    </p>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button class="like-btn flex items-center space-x-1" data-post="4">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        <span class="like-count text-sm">156</span>
                    </button>
                    <button class="comment-btn flex items-center space-x-1">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                        </svg>
                        <span class="text-sm">29</span>
                    </button>
                    <button class="share-btn">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Post 5 -->
        <div class="post-wrapper bg-gray-100 relative">
            <img 
                class="post-image w-full h-full" 
                src="./slide5.jpeg"
                alt="Ocean wave"
                onerror="this.src='./slide5.jpeg'">
            <div class="post-overlay absolute inset-0"></div>
            
            <div class="absolute bottom-0 left-0 right-0 p-4 text-white">
                <div class="flex items-center mb-3">
                    <img src="./dp.webp" 
                        alt="User" class="profile-pic mr-3" onerror="this.src='./dp.webp'">
                    <div>
                        <p class="font-semibold text-sm">ocean_soul</p>
                        <p class="text-xs opacity-75">12 hours ago</p>
                    </div>
                </div>
                
                <div class="mb-3">
                    <p class="text-sm leading-relaxed">
                        <span class="caption-preview">Ocean therapy in session üåä Nothing clears the mind like the sound of waves...</span>
                        <span class="caption-full hidden">Ocean therapy in session üåä Nothing clears the mind like the sound of waves crashing against the shore. Been feeling overwhelmed lately, so I came here to reset. There's something about the ocean's rhythm that puts everything in perspective. The waves don't stop, they just keep coming, and somehow that's comforting. Reminded me that life has its ups and downs, but it keeps flowing. Grateful for this peaceful corner of the world and the healing power of salt air. Already feeling more centered. #ocean #therapy #waves #mindfulness #reset #grateful #beachlife #mentalhealth</span>
                        <button class="read-more-btn ml-1 font-medium">read more</button>
                    </p>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button class="like-btn flex items-center space-x-1" data-post="5">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        <span class="like-count text-sm">278</span>
                    </button>
                    <button class="comment-btn flex items-center space-x-1">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                        </svg>
                        <span class="text-sm">52</span>
                    </button>
                    <button class="share-btn">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Swipe Indicators -->
    <div class="swipe-indicator">
        <div class="swipe-dot active"></div>
        <div class="swipe-dot inactive"></div>
        <div class="swipe-dot inactive"></div>
        <div class="swipe-dot inactive"></div>
        <div class="swipe-dot inactive"></div>
    </div>

    <script>
        class PostsFeed {
            constructor() {
                this.container = document.getElementById('postsContainer');
                this.posts = this.container.querySelectorAll('.post-wrapper');
                this.indicators = document.querySelectorAll('.swipe-dot');
                this.currentIndex = 0;
                this.likedPosts = new Set();
                this.isScrolling = false;
                this.lastScrollTop = 0;

                // Initialize the feed
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.updateIndicators();
            }
            
            setupEventListeners() {
                // Listen for native scroll events to update the indicators and collapse captions
                this.container.addEventListener('scroll', this.handleScroll.bind(this));
                
                // Use a 'click' event listener on the container to delegate events
                this.container.addEventListener('click', this.handleClick.bind(this));
                
                // Add a click listener for images to collapse captions
                this.posts.forEach(post => {
                    const image = post.querySelector('.post-image');
                    image.addEventListener('click', this.collapseAllCaptions.bind(this));
                });

                // Keyboard navigation for desktop
                document.addEventListener('keydown', this.handleKeyDown.bind(this));
            }

            // Handles all click events on the container
            handleClick(e) {
                const target = e.target;

                // Handle read more button clicks
                if (target.classList.contains('read-more-btn')) {
                    this.handleReadMore(target);
                }

                // Handle like button clicks
                const likeBtn = target.closest('.like-btn');
                if (likeBtn) {
                    this.handleLike(likeBtn);
                }
            }
            
            // Updates indicators and collapses captions on scroll
            handleScroll() {
                // Throttle scroll events to prevent performance issues
                if (!this.isScrolling) {
                    window.requestAnimationFrame(() => {
                        const postHeight = this.posts[0].clientHeight;
                        const newIndex = Math.round(this.container.scrollTop / postHeight);
                        
                        // Check if the scroll position has actually changed to a new post
                        if (newIndex !== this.currentIndex) {
                            this.currentIndex = newIndex;
                            this.updateIndicators();
                            this.collapseAllCaptions();
                        }
                        this.isScrolling = false;
                    });
                    this.isScrolling = true;
                }
            }

            // Collapses all expanded captions across all posts
            collapseAllCaptions() {
                const readMoreButtons = document.querySelectorAll('.read-more-btn');
                readMoreButtons.forEach(button => {
                    const postContent = button.closest('.post-wrapper');
                    const preview = postContent.querySelector('.caption-preview');
                    const full = postContent.querySelector('.caption-full');
                    
                    if (!full.classList.contains('hidden')) {
                        full.classList.add('hidden');
                        preview.classList.remove('hidden');
                        button.textContent = 'read more';
                    }
                });
            }
            
            // Toggles the 'liked' state of a post
            handleLike(likeBtn) {
                const postId = likeBtn.getAttribute('data-post');
                const likeCount = likeBtn.querySelector('.like-count');
                
                if (this.likedPosts.has(postId)) {
                    // Unlike
                    this.likedPosts.delete(postId);
                    likeBtn.classList.remove('liked');
                    likeCount.textContent = parseInt(likeCount.textContent) - 1;
                } else {
                    // Like
                    this.likedPosts.add(postId);
                    likeBtn.classList.add('liked');
                    likeCount.textContent = parseInt(likeCount.textContent) + 1;
                }
            }
            
            // Toggles between a caption preview and the full caption
            handleReadMore(button) {
                const postContent = button.closest('.post-wrapper');
                const preview = postContent.querySelector('.caption-preview');
                const full = postContent.querySelector('.caption-full');
                
                if (full.classList.contains('hidden')) {
                    // Expand
                    preview.classList.add('hidden');
                    full.classList.remove('hidden');
                    button.textContent = 'read less';
                } else {
                    // Collapse
                    full.classList.add('hidden');
                    preview.classList.remove('hidden');
                    button.textContent = 'read more';
                }
            }

            // Navigates between posts using keyboard arrows
            handleKeyDown(e) {
                switch(e.key) {
                    case 'ArrowUp':
                        e.preventDefault();
                        this.prevPost();
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        this.nextPost();
                        break;
                }
            }
            
            // Scrolls to the next post
            nextPost() {
                if (this.currentIndex < this.posts.length - 1) {
                    const postHeight = this.posts[0].clientHeight;
                    this.container.scrollTo({
                        top: (this.currentIndex + 1) * postHeight,
                        behavior: 'smooth'
                    });
                }
            }
            
            // Scrolls to the previous post
            prevPost() {
                if (this.currentIndex > 0) {
                    const postHeight = this.posts[0].clientHeight;
                    this.container.scrollTo({
                        top: (this.currentIndex - 1) * postHeight,
                        behavior: 'smooth'
                    });
                }
            }
            
            // Visually updates the swipe indicators
            updateIndicators() {
                this.indicators.forEach((indicator, index) => {
                    if (index === this.currentIndex) {
                        indicator.classList.add('active');
                        indicator.classList.remove('inactive');
                    } else {
                        indicator.classList.add('inactive');
                        indicator.classList.remove('active');
                    }
                });
            }
        }
        
        // Initialize the posts feed when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new PostsFeed();
        });
    </script>
</body>
</html>
